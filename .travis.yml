language: csharp
os: linux
env:
  global:
  - "AZURE_FTP_USER=nobs-api\\\\nobs_deploy"
  - DART_DIST=dartsdk-linux-x64-release.zip
  - DART_SDK=~/dart-sdk
  - KRE_HOME=~/.kre/packages/KRE-Mono.1.0.0-beta1
  - PATH="$DART_SDK/bin:$KRE_HOME/bin:$PATH"
  - DEPLOY_BRANCH=master
  - BUILD_TIME=$(date -Iseconds)
    # AZURE_FTP_PASSWORD
  - secure: "cX6jLPr9ldqPoPKatf6Ni3mYxDIj1oVpaQqbVsDLiMUu5YCXca+/7tqmHfHKF6/qMz+PqpMx+JPLvogIj+2THt4NN3bZv4CdPzJeaLF+NlPOiWVPFVw1drjCF/vmnpU8uKuA48UMyntKYmFhhZAM9hj9ni1cd0oT4AHs6kUCLA4="

notifications:
  email:
    recipients:
    - bgourlie@gmail.com
    on_success: change
    on_failure: always
before_install:
- date -u
- uname -a
- env | sort
- "./ci/install-deps.sh"
script:
- "./ci/run-tests.sh"
after_success:
- "./ci/pack-deployment.sh"
- "./ci/deploy.sh"
